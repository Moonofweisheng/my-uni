<script setup lang="ts">
definePage({
  name: 'advanced',
  style: {
    navigationBarTitleText: 'è¿›é˜¶æŒ‡å—',
  },
})

const router = useRouter()

function goBack() {
  router.back()
}

function demoBeforeEach() {
  router.push('/subPages/router/advanced-beforeeach')
}

function demoAfterEach() {
  router.push('/subPages/router/advanced-aftereach')
}

function demoGuardReturn() {
  router.push('/subPages/router/advanced-guard-return')
}

function demoGuardAsync() {
  router.push('/subPages/router/advanced-guard-async')
}

function demoGuardRemove() {
  router.push('/subPages/router/advanced-guard-remove')
}

function demoProtected() {
  router.push('/subPages/router/advanced-protected')
}
</script>

<template>
  <view class="min-h-screen bg-gray-100 py-3 dark:bg-[var(--wot-dark-background)]">
    <view class="mx-3 mb-3">
      <view class="rounded-3 bg-white px-5 py-6 text-center dark:bg-[var(--wot-dark-background2)]">
        <view class="mb-3 text-10">
          ğŸ›¡ï¸
        </view>
        <view class="mb-2 text-6 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
          è¿›é˜¶æŒ‡å—
        </view>
        <view class="text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
          å­¦ä¹ å¯¼èˆªå®ˆå«çš„é«˜çº§ç”¨æ³•
        </view>
      </view>
    </view>

    <demo-block title="å¯¼èˆªå®ˆå«" transparent>
      <view class="mb-3 border border-blue-200 rounded-2 bg-blue-50 p-3 dark:bg-blue-900/20">
        <view class="mb-2 text-3.5 text-blue-700 font-bold dark:text-blue-300">
          ğŸ’¡ ä»€ä¹ˆæ˜¯å¯¼èˆªå®ˆå«ï¼Ÿ
        </view>
        <view class="text-3 text-blue-600 leading-relaxed dark:text-blue-200">
          å¯¼èˆªå®ˆå«ä¸»è¦ç”¨äºé€šè¿‡è·³è½¬æˆ–å–æ¶ˆçš„æ–¹å¼å®ˆå«å¯¼èˆªã€‚å®ƒä»¬å¯ä»¥ç”¨äºæƒé™éªŒè¯ã€é¡µé¢ç»Ÿè®¡ã€å‚æ•°æ£€æŸ¥ç­‰åœºæ™¯ã€‚
        </view>
      </view>
      <view class="space-y-3">
        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å‰ç½®å®ˆå« (beforeEach)
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            åœ¨å¯¼èˆªè§¦å‘å‰æ‰§è¡Œï¼Œå¯ä»¥æ‹¦æˆªã€é‡å®šå‘æˆ–æ”¾è¡Œå¯¼èˆª
          </view>
          <view class="mb-3 border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]">
            <text class="text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]">
              router.beforeEach((to, from, next) => { next() })
            </text>
          </view>
          <wd-button type="primary" block @click="demoBeforeEach">
            ğŸ“Š æŸ¥çœ‹æ¼”ç¤º
          </wd-button>
        </view>

        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            åç½®é’©å­ (afterEach)
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            åœ¨å¯¼èˆªæˆåŠŸå®Œæˆåæ‰§è¡Œï¼Œå¸¸ç”¨äºé¡µé¢ç»Ÿè®¡ã€åŸ‹ç‚¹ä¸ŠæŠ¥
          </view>
          <view class="mb-3 border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]">
            <text class="text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]">
              router.afterEach((to, from) => { console.log(to) })
            </text>
          </view>
          <wd-button type="success" block @click="demoAfterEach">
            ğŸ“Š æŸ¥çœ‹æ¼”ç¤º
          </wd-button>
        </view>
      </view>
    </demo-block>

    <demo-block title="å®ˆå«è¿›é˜¶ç”¨æ³•" transparent>
      <view class="space-y-3">
        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å®ˆå«è¿”å›å€¼
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            æ¼”ç¤ºå®ˆå«çš„ä¸åŒè¿”å›å€¼ï¼šæ— å¤„ç†ã€è¿”å› trueã€è¿”å› falseã€è¿”å›é‡å®šå‘è·¯å¾„
          </view>
          <wd-button type="warning" block @click="demoGuardReturn">
            ğŸ”„ æŸ¥çœ‹æ¼”ç¤º
          </wd-button>
        </view>

        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å¼‚æ­¥å®ˆå«
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            æ¼”ç¤ºå®ˆå«ä¸­çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚ API è°ƒç”¨ã€å»¶è¿Ÿå¤„ç†ç­‰
          </view>
          <wd-button type="info" block @click="demoGuardAsync">
            â³ æŸ¥çœ‹æ¼”ç¤º
          </wd-button>
        </view>

        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å®ˆå«ç®¡ç†
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            æ¼”ç¤ºå¦‚ä½•åŠ¨æ€æ·»åŠ å’Œç§»é™¤è·¯ç”±å®ˆå«
          </view>
          <wd-button type="error" block @click="demoGuardRemove">
            ğŸ—‘ï¸ æŸ¥çœ‹æ¼”ç¤º
          </wd-button>
        </view>
      </view>
    </demo-block>

    <demo-block title="å®é™…åº”ç”¨åœºæ™¯" transparent>
      <view class="space-y-3">
        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            æƒé™ä¿æŠ¤
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å®ˆå«ä¿æŠ¤éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®çš„é¡µé¢
          </view>
          <wd-button type="primary" block @click="demoProtected">
            ğŸ”’ æŸ¥çœ‹æ¼”ç¤º
          </wd-button>
        </view>
      </view>
    </demo-block>

    <demo-block title="å¯¼èˆª" transparent>
      <wd-button type="warning" block @click="goBack">
        è¿”å›ä¸Šä¸€é¡µ
      </wd-button>
    </demo-block>
  </view>
</template>
