<script setup lang="ts">
definePage({
  name: 'essentials-navigation',
  style: {
    navigationBarTitleText: 'ç¼–ç¨‹å¼å¯¼èˆª',
  },
})

const router = useRouter()
const route = useRoute()
const { error: showError } = useGlobalToast()

function goBack() {
  router.back()
}

function pushToParams() {
  router.push({ name: 'essentials-params', params: { username: 'eduardo' } })
}

function pushToQuery() {
  router.push({ path: '/subPages/router/essentials-params', query: { keyword: 'vue', type: 'framework' } })
}

function pushToInvalidName() {
  router.push({ name: 'non-existent-route' }).catch((error: any) => {
    showError({
      msg: error.message || error.msg || 'è·¯ç”±ä¸å­˜åœ¨',
    })
  })
}

function pushToInvalidPath() {
  router.push({ path: '/non-existent/path' }).catch((error: any) => {
    showError({
      msg: error.message || error.msg || 'è·¯ç”±ä¸å­˜åœ¨',
    })
  })
}
</script>

<template>
  <view class="min-h-screen bg-gray-100 py-3 dark:bg-[var(--wot-dark-background)]">
    <view class="mx-3 mb-3">
      <view class="rounded-3 bg-white px-5 py-6 text-center dark:bg-[var(--wot-dark-background2)]">
        <view class="mb-3 text-8">
          ğŸ§­
        </view>
        <view class="mb-2 text-5 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
          ç¼–ç¨‹å¼å¯¼èˆª
        </view>
        <view class="text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
          ä½¿ç”¨ router.push() è¿›è¡Œé¡µé¢è·³è½¬
        </view>
      </view>
    </view>

    <demo-block title="å½“å‰é¡µé¢ä¿¡æ¯" transparent>
      <view class="rounded-3 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
        <view class="space-y-2">
          <view class="flex items-center justify-between border-b border-gray-100 py-2 dark:border-[var(--wot-dark-border)]">
            <text class="text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
              è·¯å¾„:
            </text>
            <text class="text-3.5 text-gray-800 font-mono dark:text-[var(--wot-dark-color)]">
              {{ route.path }}
            </text>
          </view>
          <view class="flex items-center justify-between border-b border-gray-100 py-2 dark:border-[var(--wot-dark-border)]">
            <text class="text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
              åç§°:
            </text>
            <text class="text-3.5 text-gray-800 font-mono dark:text-[var(--wot-dark-color)]">
              {{ route.name }}
            </text>
          </view>
          <view class="flex items-center justify-between py-2">
            <text class="text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
              ä»£ç :
            </text>
            <text class="text-3.5 text-gray-800 font-mono dark:text-[var(--wot-dark-color)]">
              router.push({ path: '/subPages/router/essentials-navigation' })
            </text>
          </view>
        </view>
      </view>
    </demo-block>

    <demo-block title="å¯¼èˆªæ–¹å¼" transparent>
      <view class="space-y-3">
        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å­—ç¬¦ä¸²è·¯å¾„
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            æœ€ç®€å•çš„è·³è½¬æ–¹å¼ï¼Œç›´æ¥ä¼ å…¥è·¯å¾„å­—ç¬¦ä¸²
          </view>
          <view class="mb-3 border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]">
            <text class="text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]">
              router.push('/user')
            </text>
          </view>
        </view>

        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å¯¹è±¡è·¯å¾„
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            ä½¿ç”¨ path å±æ€§ï¼Œä¸å­—ç¬¦ä¸²è·¯å¾„æ•ˆæœç›¸åŒ
          </view>
          <view class="mb-3 border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]">
            <text class="text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]">
              router.push({ path: '/user' })
            </text>
          </view>
        </view>

        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å‘½åè·¯ç”±
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            ä½¿ç”¨ name å±æ€§ï¼Œéœ€è¦è·¯ç”±é…ç½®ä¸­å®šä¹‰äº† name
          </view>
          <view class="mb-3 border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]">
            <text class="text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]">
              router.push({ name: 'user' })
            </text>
          </view>
        </view>
      </view>
    </demo-block>

    <demo-block title="ç»§ç»­æ¼”ç¤º" transparent>
      <view class="space-y-3">
        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å‚æ•°ä¼ é€’æ¼”ç¤º
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            å­¦ä¹ å¦‚ä½•åœ¨è·³è½¬æ—¶ä¼ é€’å‚æ•°
          </view>
          <view class="grid grid-cols-2 gap-2">
            <wd-button type="primary" size="small" @click="pushToParams">
              params å‚æ•°
            </wd-button>
            <wd-button type="success" size="small" @click="pushToQuery">
              query å‚æ•°
            </wd-button>
          </view>
        </view>

        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            é”™è¯¯è·¯ç”±æ¼”ç¤º
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            ç‚¹å‡»æŒ‰é’®æµ‹è¯•è·¯ç”±éªŒè¯åŠŸèƒ½
          </view>
          <view class="grid grid-cols-2 gap-2">
            <wd-button type="error" size="small" @click="pushToInvalidName">
              æ— æ•ˆ name
            </wd-button>
            <wd-button type="error" size="small" @click="pushToInvalidPath">
              æ— æ•ˆ path
            </wd-button>
          </view>
        </view>

        <wd-button type="warning" block @click="goBack">
          è¿”å›ä¸Šä¸€é¡µ
        </wd-button>
      </view>
    </demo-block>
  </view>
</template>
